<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#6366f1">

    <!-- iOS PWA Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="RememberMe">

    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="%PUBLIC_URL%/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="%PUBLIC_URL%/icons/icon-167x167.png">

    <!-- Splash Screens for iOS -->
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-750x1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-1242x2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="%PUBLIC_URL%/splash/launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">

    <!-- Standard PWA -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">

    <title>RememberMe - Private Pocket Dossier</title>
    <meta name="description" content="A private, encrypted pocket dossier for busy professionals. 3-second prep before every meeting.">

    <style>
      body, html, #root {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!-- iOS Install Prompt Script -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/service-worker.js')
            .then(function(registration) {
              console.log('SW registered: ', registration);
            })
            .catch(function(registrationError) {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }

      // iOS Add to Home Screen detection
      let isIOS = /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());
      let isInstalled = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

      if (isIOS && !isInstalled) {
        window.addEventListener('beforeinstallprompt', function(e) {
          e.preventDefault();
          window.deferredPrompt = e;

          // Show custom iOS install banner
          setTimeout(() => {
            const iosPrompt = document.createElement('div');
            iosPrompt.innerHTML = `
              <div style="
                position: fixed;
                bottom: 20px;
                left: 20px;
                right: 20px;
                background: #6366f1;
                color: white;
                padding: 16px;
                border-radius: 12px;
                z-index: 9999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              ">
                <strong style="font-size: 16px;">ðŸ“± Install RememberMe</strong>
                <p style="margin: 8px 0; font-size: 14px;">Tap the share button and select "Add to Home Screen"</p>
                <button onclick="this.parentElement.parentElement.remove()" style="
                  background: white;
                  color: #6366f1;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 8px;
                  font-weight: bold;
                  cursor: pointer;
                ">Got it</button>
              </div>
            `;
            document.body.appendChild(iosPrompt);
          }, 2000);
        });
      }
    </script>
</body>
</html>
